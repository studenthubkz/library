<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–Ω–ª–∞–π–Ω –∫—ñ—Ç–∞–ø—Ö–∞–Ω–∞ - –ó–∞–º–∞–Ω–∞—É–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
     /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–æ–≤ */
:root {
    --primary-color: #8c6d46;
    --primary-light: #d4a373;
    --primary-dark: #5a3e2b;
    --accent-color: #f9e4b7;
    --background-color: #f9f4e8;
    --text-color: #3c3c3c;
    --success-color: #4bb71b;
    --warning-color: #ffc107;
    --danger-color: #dc3545;
    --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 10px rgba(0, 0, 0, 0.2);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
    --transition-fast: all 0.2s ease;
    --transition-normal: all 0.3s ease;
    --transition-slow: all 0.5s ease;
    --border-radius: 8px;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    line-height: 1.6;
    transition: var(--transition-normal);
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–π navbar —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π */
.navbar {
    background-color: var(--primary-color);
    box-shadow: var(--shadow-md);
    padding: 15px 0;
    transition: var(--transition-normal);
    position: sticky;
    top: 0;
    z-index: 100;
}

.navbar.scrolled {
    padding: 10px 0;
    background-color: rgba(140, 109, 70, 0.95);
    backdrop-filter: blur(5px);
}

.navbar-brand, .nav-link {
    color: #fff !important;
    font-weight: 500;
    transition: var(--transition-normal);
}

.navbar-brand {
    font-size: 1.5rem;
    display: flex;
    align-items: center;
}

.navbar-brand img, .navbar-brand i {
    margin-right: 8px;
}

.nav-link {
    position: relative;
    padding: 8px 15px !important;
    margin: 0 5px;
}

.nav-link:after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: 0;
    left: 50%;
    background-color: var(--accent-color);
    transition: var(--transition-normal);
    transform: translateX(-50%);
}

.nav-link:hover {
    color: var(--accent-color) !important;
    transform: translateY(-2px);
}

.nav-link:hover:after, .nav-link.active:after {
    width: 80%;
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–π Hero section */
.hero {
    text-align: center;
    padding: 100px 0;
    background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                      url('https://www.northampton.ac.uk/wp-content/uploads/2018/02/alfons-morales-410757-unsplash.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: #fff;
    position: relative;
    margin-bottom: 50px;
}

.hero h1 {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    animation: fadeInDown 1s ease-out;
}

.hero p {
    font-size: 1.5rem;
    margin-bottom: 30px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    animation: fadeInUp 1s ease-out 0.5s both;
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–Ω–∏–≥ */
.book-list {
    margin-top: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 25px;
}

.book-item {
    background-color: #fff;
    padding: 20px;
    width: 220px;
    text-align: center;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    transition: var(--transition-normal);
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.book-item img {
    transition: var(--transition-slow);
    max-height: 200px;
    object-fit: cover;
    border-radius: calc(var(--border-radius) - 4px);
    box-shadow: var(--shadow-sm);
}

.book-item:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-8px);
}

.book-item:hover img {
    transform: scale(1.05);
}

.book-item h3, .book-item h5 {
    font-weight: 600;
    margin-top: 15px;
    font-size: 18px;
    height: 50px;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    line-clamp: 2;
    color: var(--primary-dark);
}

.book-item p {
    font-size: 14px;
    color: var(--primary-light);
    font-style: italic;
    margin-bottom: 15px;
}

.book-item .btn {
    margin-top: 10px;
    transition: var(--transition-normal);
    width: 100%;
}

.book-item .btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –±–µ–π–¥–∂–∏ –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –∫–Ω–∏–≥ */
.paid-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: var(--danger-color);
    color: white;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    box-shadow: var(--shadow-sm);
    z-index: 2;
    animation: pulse 2s infinite;
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∂–∞–Ω—Ä–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ */
.genre-button {
    background-color: var(--primary-dark);
    color: #fff;
    border: none;
    padding: 10px 20px;
    margin: 8px;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: 15px;
    transition: var(--transition-normal);
    box-shadow: var(--shadow-sm);
}

.genre-button:hover {
    background-color: var(--primary-light);
    transform: translateY(-3px) scale(1.05);
    box-shadow: var(--shadow-md);
}

.genre-button.active {
    background-color: var(--primary-light);
    color: white;
    transform: scale(1.05);
    box-shadow: var(--shadow-md);
    font-weight: bold;
}

/* –û–≤–µ—Ä–ª–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.9);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
}

.loading-overlay.show {
    opacity: 1;
    pointer-events: all;
}

.loading-spinner {
    width: 60px;
    height: 60px;
    border: 5px solid rgba(212, 163, 115, 0.2);
    border-top: 5px solid var(--primary-light);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

.loading-text {
    margin-top: 20px;
    font-size: 18px;
    color: var(--primary-dark);
    font-weight: 600;
    text-align: center;
}

.loading-progress {
    width: 200px;
    height: 6px;
    background-color: rgba(212, 163, 115, 0.2);
    border-radius: 3px;
    margin-top: 15px;
    overflow: hidden;
}

.loading-progress-bar {
    height: 100%;
    background-color: var(--primary-light);
    width: 0%;
    transition: width 0.3s ease;
    border-radius: 3px;
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
.notification-toast {
    position: fixed;
    top: 20px;
    right: 20px;
    background-color: var(--success-color);
    color: white;
    padding: 15px 25px;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg);
    z-index: 1001;
    transform: translateX(150%);
    transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    display: flex;
    align-items: center;
    max-width: 350px;
}

.notification-toast.show {
    transform: translateX(0);
}

.notification-toast i {
    margin-right: 12px;
    font-size: 20px;
}

.notification-content {
    font-weight: 500;
}

/* –£–ª—É—á—à–µ–Ω–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–Ω–∏–≥–∏ */
.modal-content {
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    border: none;
}

.modal-header {
    background-color: var(--primary-color);
    color: white;
    border-bottom: none;
    padding: 15px 20px;
}

.modal-book-img {
    max-height: 200px;
    object-fit: contain;
    margin: 0 auto 20px;
    display: block;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
}

/* QR-–∫–æ–¥ –∏ –æ–ø–ª–∞—Ç–∞ */
.payment-qr-container {
    position: relative;
    width: 200px;
    height: 200px;
    margin: 20px auto;
    perspective: 1000px;
}

.payment-qr {
    max-width: 100%;
    border-radius: var(--border-radius);
    transition: var(--transition-normal);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.payment-qr:hover {
    transform: rotateY(10deg) scale(1.02);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
}

.qr-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: rgba(255, 255, 255, 0.7);
    border-radius: var(--border-radius);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
}

.qr-overlay.show {
    opacity: 1;
    pointer-events: all;
}

/* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
.btn-primary {
    background-color: var(--primary-light);
    border-color: var(--primary-light);
    padding: 10px 20px;
    transition: var(--transition-normal);
    font-weight: 500;
}

.btn-primary:hover {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

.btn-secondary {
    background-color: #6c757d;
    border-color: #6c757d;
    transition: var(--transition-normal);
}

.btn-secondary:hover {
    background-color: #5a6268;
    transform: translateY(-2px);
    box-shadow: var (--shadow-sm);
}

.btn-success {
    background-color: var(--success-color);
    border-color: var(--success-color);
    transition: var(--transition-normal);
}

.btn-success:hover {
    background-color: #3d9714;
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

/* –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –≥–∞–ª–æ—á–∫–∏ –±–µ–∑ –≤—Å–ø—ã—à–µ–∫ */
.checkmark {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: block;
    stroke-width: 3;
    stroke: var(--success-color);
    stroke-miterlimit: 10;
    margin: 0 auto;
    position: relative;
    z-index: 10;
    background: #fff;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.checkmark__circle {
    stroke-dasharray: 166;
    stroke-dashoffset: 166;
    stroke-width: 2;
    stroke-miterlimit: 10;
    stroke: var(--success-color);
    fill: none;
    animation: stroke 0.8s cubic-bezier(0.65, 0, 0.45, 1) forwards;
}

.checkmark__check {
    transform-origin: 50% 50%;
    stroke-dasharray: 48;
    stroke-dashoffset: 48;
    animation: stroke 0.5s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
}

/* –£–¥–∞–ª—è–µ–º –ª–∏—à–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ */
@keyframes stroke {
    100% {
        stroke-dashoffset: 0;
    }
}

/* –£–¥–∞–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏ scale –∏ fill, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –≤—Å–ø—ã—à–∫–∏ */

/* –£–¥–∞–ª—è–µ–º success-rays, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–≤–∞–ª —ç—Ñ—Ñ–µ–∫—Ç –ª—É—á–µ–π –≤–æ–∫—Ä—É–≥ –≥–∞–ª–æ—á–∫–∏ */
.success-rays {
    display: none;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ */
.confetti-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}

.confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: #f00;
    opacity: 0;
    animation: confettiFall 3s ease-out forwards;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
@keyframes fadeInDown {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 87, 34, 0.4);
    }
    70% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(255, 87, 34, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 87, 34, 0);
    }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes rotateCircle {
    0% {
        transform: rotate(0);
    }
    100% {
        transform: rotate(360deg);
    }
}

@keyframes confettiFall {
    0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
    }
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
    .hero {
        padding: 60px 0;
    }
    
    .hero h1 {
        font-size: 2rem;
    }
    
    .hero p {
        font-size: 1.2rem;
    }
    
    .book-item {
        width: 160px;
        padding: 15px;
    }
    
    .book-item img {
        max-height: 160px;
    }
    
    .book-item h3, .book-item h5 {
        font-size: 16px;
        height: 45px;
    }
    
    .genre-button {
        padding: 8px 15px;
        font-size: 13px;
        margin: 5px;
    }
    
    .payment-qr-container {
        width: 160px;
        height: 160px;
    }
    
    .checkmark {
        width: 80px;
        height: 80px;
    }
}
    </style>
</head>
<body>
    <!-- –î–æ–±–∞–≤–ª—è–µ–º –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>
    
    <!-- –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—Å—Ç –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div class="notification-toast" id="notificationToast">
        <div class="notification-content">–û–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!</div>
    </div>
    
    <div id="login-section">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="#">üìö –û–Ω–ª–∞–π–Ω –∫—ñ—Ç–∞–ø—Ö–∞–Ω–∞</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="#register">–¢—ñ—Ä–∫–µ–ª—É</a>
                        </li>                    
                        <li class="nav-item"><a class="nav-link" href="#contact">–ë–∞–π–ª–∞–Ω—ã—Å</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <header class="hero">
            <h1>–û–Ω–ª–∞–π–Ω –∫—ñ—Ç–∞–ø—Ö–∞–Ω–∞“ì–∞ “õ–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑!</h1>
            <p>–ö—ñ—Ç–∞–ø—Ç–∞—Ä ”ô–ª–µ–º—ñ–Ω –∞—à—ã“£—ã–∑</p>
        </header>

        <section id="register" class="container my-5 form-container">
            <div class="card p-4 shadow" style="width: 100%; max-width: 400px;">
                <ul class="nav nav-tabs auth-tabs" id="authTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login-content" type="button" role="tab" aria-controls="login-content" aria-selected="true">–ö—ñ—Ä—É</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register-content" type="button" role="tab" aria-controls="register-content" aria-selected="false">–¢—ñ—Ä–∫–µ–ª—É</button>
                    </li>
                </ul>
                <div class="tab-content" id="authTabsContent">
                    <!-- –í–∫–ª–∞–¥–∫–∞ –≤—Ö–æ–¥–∞ -->
                    <div class="tab-pane fade show active" id="login-content" role="tabpanel" aria-labelledby="login-tab">
                        <h2 class="text-center mt-3">–ö—ñ—Ä—É</h2>
                        <form class="row g-3 mt-3" onsubmit="return validateLogin()">
                            <div class="col-12">
                                <label for="login-email" class="form-label">–õ–æ–≥–∏–Ω:</label>
                                <input type="text" class="form-control" id="login-email" required>
                            </div>
                            <div class="col-12">
                                <label for="login-password" class="form-label">“ö“±–ø–∏—è —Å”©–∑:</label>
                                <input type="password" class="form-control" id="login-password" required>
                            </div>
                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-primary w-100">–ö—ñ—Ä—É</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- –í–∫–ª–∞–¥–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                    <div class="tab-pane fade" id="register-content" role="tabpanel" aria-labelledby="register-tab">
                        <h2 class="text-center mt-3">–¢—ñ—Ä–∫–µ–ª—É</h2>
                        <form class="row g-3 mt-3" onsubmit="return registerUser()">
                            <div class="col-12">
                                <label for="register-name" class="form-label">–ê—Ç—ã-–∂”©–Ω—ñ:</label>
                                <input type="text" class="form-control" id="register-name" required>
                            </div>
                            <div class="col-12">
                                <label for="register-email" class="form-label">–≠-–ø–æ—à—Ç–∞:</label>
                                <input type="email" class="form-control" id="register-email" required>
                            </div>
                            <div class="col-12">
                                <label for="register-password" class="form-label">“ö“±–ø–∏—è —Å”©–∑:</label>
                                <input type="password" class="form-control" id="register-password" required>
                            </div>
                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-primary w-100">–¢—ñ—Ä–∫–µ–ª—É</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="main-section">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="#">üìö –û–Ω–ª–∞–π–Ω –∫—ñ—Ç–∞–ø—Ö–∞–Ω–∞</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <li class="nav-item">
                                <a class="nav-link" href="#" onclick="showAllBooks()">–ö–∞—Ç–∞–ª–æ–≥</a>
                            </li>                            

                        </li>                    
                        <li class="nav-item"><a class="nav-link" href="#contact">–ë–∞–π–ª–∞–Ω—ã—Å</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <header class="hero">
            <h1>–ö–∞—Ç–∞–ª–æ–≥ –±–µ—Ç—ñ–Ω–µ “õ–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑!</h1>
            <p>–ö—ñ—Ç–∞–ø—Ç–∞—Ä ”ô–ª–µ–º—ñ–Ω –∑–µ—Ä—Ç—Ç–µ“£—ñ–∑</p>
        </header>

        <section id="search-banner" class="search-banner">
            <div class="search-bar-container">
                <input type="text" id="search-bar" placeholder="–ö—ñ—Ç–∞–ø—Ç—ã“£ –∞—Ç—ã–Ω –Ω–µ–º–µ—Å–µ –∞–≤—Ç–æ—Ä–¥—ã —ñ–∑–¥–µ“£—ñ–∑..." onkeyup="searchBooks()">
                <button type="button" class="search-button">üîç</button>
            </div>
        </section>

        <section id="popular-books" class="container my-5">
            <h2 class="text-center">üìö –¢–∞–Ω—ã–º–∞–ª –∫—ñ—Ç–∞–ø—Ç–∞—Ä</h2>
            <div class="book-list" id="popular-books-container"></div>
        </section>        
        
        <section id="genre-selection" class="container my-5">
            <h2 class="text-center">üé≠ –ñ–∞–Ω—Ä–¥—ã —Ç–∞“£–¥–∞“£—ã–∑</h2>
            <div class="genre-buttons text-center">
            </div>
        </section>

        <div class="genres" id="genres">
            
        </div>

        <div class="book-list" id="book-list">
            
        </div>


        <section id="contact" class="container my-5">
            <h2 class="text-center">–ë–∞–π–ª–∞–Ω—ã—Å</h2>
            <p class="text-center">–ë—ñ–∑–¥—ñ“£ –º–µ–∫–µ–Ω –∂–∞–π—ã–º—ã–∑: –ê–ª–º–∞—Ç—ã “õ., –ì–æ–≥–æ–ª—è –∫-—Å—ñ, 114-“Ø–π</p>
            <p class="text-center">–ë–∞–π–ª–∞–Ω—ã—Å —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–æ–º–µ—Ä—ñ: +7 (747) 565-89-14</p>
        </section>
    </div>

    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–Ω–∏–≥–µ -->
    <div class="modal fade" id="bookModal" tabindex="-1" aria-labelledby="bookModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="bookModalLabel">–ö—ñ—Ç–∞–ø —Ç—É—Ä–∞–ª—ã —Ç–æ–ª—ã“ì—ã—Ä–∞“õ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4 text-center">
                            <img id="modal-book-img" src="" alt="" class="modal-book-img img-fluid">
                            <div id="modal-book-price-info" class="mt-3"></div>
                        </div>
                        <div class="col-md-8">
                            <h3 id="modal-book-title" class="mb-2"></h3>
                            <p id="modal-book-author" class="text-muted mb-3"></p>
                            <h5>–ö—ñ—Ç–∞–ø —Ç—É—Ä–∞–ª—ã:</h5>
                            <p id="modal-book-description" class="book-description"></p>
                            <div id="modal-book-action-container" class="mt-4">
                                <a id="modal-book-link" href="#" target="_blank" class="btn btn-primary">
                                    <i class="fas fa-book-open me-2"></i>–ö—ñ—Ç–∞–ø—Ç—ã –æ“õ—É
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ–ø–ª–∞—Ç—ã -->
    <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentModalLabel">–ö—ñ—Ç–∞–ø—Ç—ã —Å–∞—Ç—ã–ø –∞–ª—É</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <h5 id="payment-book-title"></h5>
                    <p id="payment-book-price"></p>
                    <p>–¢”©–ª–µ–º –∂–∞—Å–∞—É “Ø—à—ñ–Ω QR –∫–æ–¥—Ç—ã —Å–∫–∞–Ω–µ—Ä–ª–µ“£—ñ–∑:</p>
                    <div class="position-relative">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://example.com/payment" alt="Payment QR Code" class="payment-qr">
                        <div class="qr-overlay d-none position-absolute top-0 start-0 w-100 h-100 bg-white bg-opacity-75 d-flex justify-content-center align-items-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button id="simulate-scan" class="btn btn-primary me-2">QR –°–∫–∞–Ω–µ—Ä–ª–µ—É–¥—ñ –∏–º–∏—Ç–∞—Ü–∏—è–ª–∞—É</button>
                        <button id="confirm-payment" class="btn btn-success">–¢”©–ª–µ–º–¥—ñ —Ä–∞—Å—Ç–∞—É</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content success-modal">
                <div class="modal-body text-center py-5">
                    <div class="confetti-container" id="confetti-container"></div>
                    <div class="success-animation">
                        <div class="success-rays"></div>
                        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                            <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                        </svg>
                    </div>
                    <h3 class="mt-4 mb-3">–¢”©–ª–µ–º —Å”ô—Ç—Ç—ñ –∞—è“õ—Ç–∞–ª–¥—ã!</h3>
                    <p class="mb-4">–†–∞—Ö–º–µ—Ç! –ö—ñ—Ç–∞–ø —Å”ô—Ç—Ç—ñ —Å–∞—Ç—ã–ø –∞–ª—ã–Ω–¥—ã. –ï–Ω–¥—ñ —Å—ñ–∑ –æ–Ω—ã –æ“õ–∏ –∞–ª–∞—Å—ã–∑.</p>
                    <div class="d-flex justify-content-center">
                        <button id="success-read-book" class="btn btn-primary me-2">
                            <i class="fas fa-book-open me-2"></i>–ö—ñ—Ç–∞–ø—Ç—ã –æ“õ—É
                        </button>
                        <button id="success-close" class="btn btn-secondary">
                            <i class="fas fa-times me-1"></i>–ñ–∞–±—É
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Socket.IO -->
<script src="/socket.io/socket.io.js"></script>

<script>
    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
    let currentUser = null;
    let currentUserId = null;
</script>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Socket.io
        const socket = io();
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ sessionId –∏–∑ URL, –µ—Å–ª–∏ –µ—Å—Ç—å
        const urlParams = new URLSearchParams(window.location.search);
        const sessionId = urlParams.get('sessionId');
        
        const users = [
            { email: 'aiibidildaeva@gmail.com', password: 'admin', name: '–ê–¥–º–∏–Ω' }
        ];
        
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫–Ω–∏–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        const purchasedBooks = {};
        
        const books = [
            { 
                id: 1,
                title: "–ú–∞—Ö–∞–±–±–∞—Ç, “õ—ã–∑—ã“õ –º–æ–ª –∂—ã–ª–¥–∞—Ä", 
                author: "”ò–∑—ñ–ª—Ö–∞–Ω –ù“±—Ä—à–∞–π—ã“õ–æ–≤", 
                genre: "–†–æ–º–∞–Ω—Ç–∏–∫–∞", 
                description: "–ú–∞—Ö–∞–±–±–∞—Ç, “õ—ã–∑—ã“õ –º–æ–ª –∂—ã–ª–¥–∞—Ä ‚Äî ”ò–∑—ñ–ª—Ö–∞–Ω –ù“±—Ä—à–∞–π—ã“õ–æ–≤—Ç—ã“£ “õ–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω—ñ“£ –∫–ª–∞—Å—Å–∏–∫–∞—Å—ã–Ω–∞ –∞–π–Ω–∞–ª“ì–∞–Ω —Ç—É—ã–Ω–¥—ã—Å—ã. –ë“±–ª —Ä–æ–º–∞–Ω 1967 –∂—ã–ª—ã –∞–ª“ì–∞—à —Ä–µ—Ç –∂–∞—Ä—ã“õ –∫”©—Ä—ñ–ø, “õ–∞–∑–∞“õ –∂–∞—Å—Ç–∞—Ä—ã–Ω—ã“£ —Å“Ø–π—ñ–∫—Ç—ñ –∫—ñ—Ç–∞–±—ã–Ω–∞ –∞–π–Ω–∞–ª–¥—ã. –†–æ–º–∞–Ω–Ω—ã“£ –±–∞—Å—Ç—ã –∫–µ–π—ñ–ø–∫–µ—Ä–ª–µ—Ä—ñ ‚Äî —Å—Ç—É–¥–µ–Ω—Ç—Ç–µ—Ä –º–µ–Ω –∂–∞—Å –∞–¥–∞–º–¥–∞—Ä–¥—ã“£ –º–∞—Ö–∞–±–±–∞—Ç, –¥–æ—Å—Ç—ã“õ, ”©–º—ñ—Ä–¥—ñ“£ —Ç“Ø—Ä–ª—ñ “õ–∏—ã–Ω–¥—ã“õ—Ç–∞—Ä—ã–Ω –∂–µ“£—ñ–ø —à—ã“ì—É –∂–æ–ª—ã–Ω–¥–∞“ì—ã –∫“Ø—Ä–µ—Å—ñ. –ñ–∞–∑—É—à—ã –∂–∞—Å—Ç–∞—Ä–¥—ã“£ —ñ—à–∫—ñ —Å–µ–∑—ñ–º–¥–µ—Ä—ñ–Ω, –æ–ª–∞—Ä–¥—ã“£ –∞–¥–∞–º–≥–µ—Ä—à—ñ–ª—ñ–∫, –∞–¥–∞–ª–¥—ã“õ, –º–∞—Ö–∞–±–±–∞—Ç —Ç—É—Ä–∞–ª—ã —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç–µ—Ä—ñ–Ω —Ç–µ—Ä–µ“£ ”ô—Ä—ñ —à—ã–Ω–∞–π—ã —Å—É—Ä–µ—Ç—Ç–µ–π–¥—ñ.",
                link: "http://dev-s.balatili.kz/uploads/books/e3c0b8aca955a2e22aa53f053550270c/%D0%9C%D0%B0%D1%85%D0%B0%D0%B1%D0%B1%D0%B0%D1%82%20%D2%9B%D1%8B%D0%B7%D1%8B%D2%9B%20%D0%BC%D0%BE%D0%BB%20%D0%B6%D1%8B%D0%BB%D0%B4%D0%B0%D1%80.pdf", 
                image: "https://simg.marwin.kz/media/catalog/product/cache/41deb699a7fea062a8915debbbb0442c/m/a/nrshayyov_mahabbat_yzy_mol_jyldar.jpg",
                isPaid: true,
                price: 1200
            },
            { 
                id: 2,
                title: "–ê–±–∞–π –ñ–æ–ª—ã", 
                author: "–ú“±—Ö—Ç–∞—Ä ”ò—É–µ–∑–æ–≤", 
                genre: "–ö–ª–∞—Å—Å–∏–∫–∞", 
                description: "–ê–±–∞–π –∂–æ–ª—ã ‚Äî “õ–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω—ñ“£ “±–ª—ã —à—ã“ì–∞—Ä–º–∞–ª–∞—Ä—ã–Ω—ã“£ –±—ñ—Ä—ñ, “õ–∞–∑–∞“õ —Ö–∞–ª“õ—ã–Ω—ã“£ –∫–ª–∞—Å—Å–∏–∫–∞–ª—ã“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω—ñ“£ —Å–∏–º–≤–æ–ª—ã –∂”ô–Ω–µ “õ–∞–∑–∞“õ—Ç—ã“£ “±–ª—ã –∞“õ—ã–Ω—ã, –æ–π—à—ã–ª—ã –ê–±–∞–π “ö“±–Ω–∞–Ω–±–∞–π“±–ª—ã–Ω—ã“£ ”©–º—ñ—Ä—ñ –º–µ–Ω —à—ã“ì–∞—Ä–º–∞—à—ã–ª—ã“ì—ã–Ω–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω —Ä–æ–º–∞–Ω-—ç–ø–æ–ø–µ—è. –ê–±–∞–π –∂–æ–ª—ã ‚Äî —Ç”©—Ä—Ç —Ç–æ–º–Ω–∞–Ω —Ç“±—Ä–∞—Ç—ã–Ω –∫“Ø—Ä–¥–µ–ª—ñ —ç–ø–æ–ø–µ—è, –∞–ª“ì–∞—à —Ä–µ—Ç 1942 –∂—ã–ª—ã –∂–∞—Ä–∏—è–ª–∞–Ω“ì–∞–Ω. –ú“±—Ö—Ç–∞—Ä ”ò—É–µ–∑–æ–≤ –æ—Å—ã —à—ã“ì–∞—Ä–º–∞—Å—ã–Ω–¥–∞ –ê–±–∞–π–¥—ã“£ –∂–µ–∫–µ ”©–º—ñ—Ä—ñ–Ω, –æ–Ω—ã“£ –¥“Ø–Ω–∏–µ—Ç–∞–Ω—ã–º—ã–Ω, —à—ã“ì–∞—Ä–º–∞—à—ã–ª—ã“ì—ã–Ω, “õ–∞–∑–∞“õ “õ–æ“ì–∞–º—ã–Ω–¥–∞“ì—ã ”©–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä–¥—ñ –∂”ô–Ω–µ —Å–æ–ª –∫–µ–∑–µ“£–¥–µ–≥—ñ —Ç–∞—Ä–∏—Ö–∏ –æ“õ–∏“ì–∞–ª–∞—Ä–¥—ã —Ç–µ—Ä–µ“£ –±–µ–π–Ω–µ–ª–µ–π–¥—ñ.",
                link: "https://predmet.kz/adebiet/%D0%BA%D1%96%D1%82%D0%B0%D0%BF%D1%82%D0%B0%D1%80/%D0%90%D0%B1%D0%B0%D0%B9%20%D0%B6%D0%BE%D0%BB%D1%8B.1%20%D0%BA%D1%96%D1%82%D0%B0%D0%BF.pdf", 
                image: "https://s.f.kz/prod/1540/1539578_1000.jpg",
                isPaid: false,
                price: 0
            },
            { 
                id: 3,
                title: "“ö–∞–Ω –º–µ–Ω –¢–µ—Ä", 
                author: "”ò–±–¥—ñ–∂”ô–º—ñ–ª –ù“±—Ä–ø–µ–π—ñ—Å–æ–≤", 
                genre: "–ö–ª–∞—Å—Å–∏–∫–∞", 
                description: "“ö–∞–Ω –º–µ–Ω —Ç–µ—Ä ‚Äî “õ–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω—ñ“£ –∫”©—Ä–Ω–µ–∫—Ç—ñ —à—ã“ì–∞—Ä–º–∞–ª–∞—Ä—ã–Ω—ã“£ –±—ñ—Ä—ñ, –∂–∞–∑—É—à—ã ”ò–±–¥—ñ–∂”ô–º—ñ–ª –ù“±—Ä–ø–µ–π—ñ—Å–æ–≤—Ç—ñ“£ –µ“£ —Ç–∞–Ω—ã–º–∞–ª —Ç—É—ã–Ω–¥—ã—Å—ã. –†–æ–º–∞–Ω –∞–ª“ì–∞—à —Ä–µ—Ç 1970 –∂—ã–ª—ã –∂–∞—Ä–∏—è–ª–∞–Ω“ì–∞–Ω –∂”ô–Ω–µ “õ–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω—ñ“£ –∫–ª–∞—Å—Å–∏–∫–∞–ª—ã“õ —Ç—É—ã–Ω–¥—ã–ª–∞—Ä—ã–Ω—ã“£ “õ–∞—Ç–∞—Ä—ã–Ω–∞ –∫—ñ—Ä–µ–¥—ñ. –®—ã“ì–∞—Ä–º–∞ ”©–∑—ñ–Ω—ñ“£ —Ç–µ—Ä–µ“£ ”ô–ª–µ—É–º–µ—Ç—Ç—ñ–∫ –∂”ô–Ω–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è–ª—ã“õ –º–∞–∑–º“±–Ω—ã–º–µ–Ω –µ—Ä–µ–∫—à–µ–ª–µ–Ω–µ–¥—ñ, “õ–∞–∑–∞“õ —Ö–∞–ª“õ—ã–Ω—ã“£ “õ–∏—ã–Ω –∫–µ–∑–µ“£–¥–µ—Ä—ñ –º–µ–Ω —Ö–∞–ª—ã“õ—Ç—ã“õ —Ç–∞“ì–¥—ã—Ä–¥—ã“£ —à—ã–Ω–∞–π—ã —Å—É—Ä–µ—Ç—ñ–Ω –∫”©—Ä—Å–µ—Ç–µ–¥—ñ.",
                link: "https://adebiportal.kz/upload/iblock/0d5/0d581f528880c6ae74bf3685d2ef0add.pdf", 
                image: "https://balkhash.goo.kz/files/blog/1674232545216.jpg",
                isPaid: true,
                price: 1500
            },
            { 
               id: 4,
               title: "“∞—à“õ–∞–Ω “±—è", 
               author: "–ë–∞—É—ã—Ä–∂–∞–Ω –ú–æ–º—ã—à“±–ª—ã", 
               genre: "”ò–¥–µ–±–∏", 
               link: "https://adebiportal.kz/upload/iblock/5e1/5e13518fb629e466f3a930c56af4d672.pdf", 
               description: "“∞—à“õ–∞–Ω “±—è ‚Äî “õ–∞–∑–∞“õ –∂–∞–∑—É—à—ã—Å—ã –ë–∞—É—ã—Ä–∂–∞–Ω –ú–æ–º—ã—à“±–ª—ã–Ω—ã“£ ”©–º—ñ—Ä—ñ –º–µ–Ω —à—ã“ì–∞—Ä–º–∞—à—ã–ª—ã“ì—ã–Ω –¥”ô—Ä—ñ–ø—Ç–µ–π—Ç—ñ–Ω –∫”©—Ä–∫–µ–º —Ç—É—ã–Ω–¥—ã. –ë“±–ª —à—ã“ì–∞—Ä–º–∞ –∞–ª“ì–∞—à —Ä–µ—Ç 1966 –∂—ã–ª—ã –∂–∞—Ä—ã“õ –∫”©—Ä–≥–µ–Ω –∂”ô–Ω–µ –ë–∞—É—ã—Ä–∂–∞–Ω –ú–æ–º—ã—à“±–ª—ã–Ω—ã“£ —à—ã“ì–∞—Ä–º–∞–ª–∞—Ä—ã–Ω—ã“£ —ñ—à—ñ–Ω–¥–µ–≥—ñ –µ“£ —Ç–∞–Ω—ã–º–∞–ª—ã –±–æ–ª—ã–ø —Ç–∞–±—ã–ª–∞–¥—ã. –†–æ–º–∞–Ω –∂–∞–∑—É—à—ã–Ω—ã“£ ”©–∑ –±–∞–ª–∞–ª—ã“õ —à–∞“ì—ã, –∞—Ç–∞-–∞–Ω–∞—Å—ã –∂”ô–Ω–µ ”©—Å–∫–µ–Ω –æ—Ä—Ç–∞—Å—ã —Ç—É—Ä–∞–ª—ã –±–µ–π–Ω–µ–ª—ñ —Ç“Ø—Ä–¥–µ –±–∞—è–Ω–¥–∞–ª–∞–¥—ã.",
               image: "https://frankfurt.apollo.olxcdn.com/v1/files/a77ofbi5geuz-KZ/image",
               isPaid: false,
               price: 0
            },
            {
               id: 5,
               title: "–ë–∞“õ—ã—Ç—Å—ã–∑ –ñ–∞–º–∞–ª",
               author: "–ú—ñ—Ä–∂–∞“õ–æ–≤ –î—É–ª–∞—Ç“±–ª—ã", 
               genre: "–†–æ–º–∞–Ω—Ç–∏–∫–∞", 
               link: "http://dev-s.balatili.kz/uploads/books/c440d23f5b0133c2199ed66e3fb01ffd/%D0%91%D0%90%D2%9A%D0%AB%D0%A2%D0%A1%D0%AB%D0%97%20%D0%96%D0%90%D0%9C%D0%90%D0%9B%20-%20%D0%A0%D0%BE%D0%BC%D0%B0%D0%9D.pdf", 
               description: "–ë–∞“õ—ã—Ç—Å—ã–∑ –ñ–∞–º–∞–ª ‚Äì –±“±–ª “õ–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω—ñ“£ –∫–ª–∞—Å—Å–∏–∫–∞–ª—ã“õ —Ç—É—ã–Ω–¥—ã–ª–∞—Ä—ã–Ω—ã“£ –±—ñ—Ä—ñ, –∂–∞–∑—É—à—ã –ú—ñ—Ä–∂–∞“õ—ã–ø –î—É–ª–∞—Ç“±–ª—ã–Ω—ã“£ –µ“£ ”ô–π–≥—ñ–ª—ñ —à—ã“ì–∞—Ä–º–∞–ª–∞—Ä—ã–Ω—ã“£ “õ–∞—Ç–∞—Ä—ã–Ω–∞ –∂–∞—Ç–∞–¥—ã. –†–æ–º–∞–Ω –∞–ª“ì–∞—à —Ä–µ—Ç 1910 –∂—ã–ª—ã –∂–∞—Ä—ã“õ –∫”©—Ä–¥—ñ. –®—ã“ì–∞—Ä–º–∞–Ω—ã“£ –±–∞—Å—Ç—ã —Ç–∞“õ—ã—Ä—ã–±—ã ‚Äî “õ–æ“ì–∞–º–¥—ã“õ “õ–∞–π—à—ã–ª—ã“õ—Ç–∞—Ä –º–µ–Ω –∞–¥–∞–º–Ω—ã“£ —ñ—à–∫—ñ ”ô–ª–µ–º—ñ–Ω—ñ“£ –∫“Ø—Ä–µ—Å—ñ, —Å–æ–Ω–¥–∞–π-–∞“õ ”ô–π–µ–ª–¥–µ—Ä–¥—ñ“£ “õ–æ“ì–∞–º–¥—ã“õ –æ—Ä–Ω—ã –º–µ–Ω –±–æ—Å—Ç–∞–Ω–¥—ã“ì—ã –º”ô—Å–µ–ª–µ–ª–µ—Ä—ñ–Ω–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω.",
               image: "https://static.insales-cdn.com/images/products/1/4844/877253356/M_Dulatov_Baqytsyz_Jamal_pocketbook_COVER-16_curv.png",
               isPaid: true,
               price: 1000
            },
            {
               id: 6,
               title: "–ê“õ–±—ñ–ª–µ–∫", 
               author: "–ñ“Ø—Å—ñ–ø–±–µ–∫ –ê–π–º–∞—É—ã—Ç–æ–≤", 
               genre: "–ö–ª–∞—Å—Å–∏–∫–∞", 
               link: "https://sauap.org/wp-content/uploads/2016/08/Zhusipbek_Aimauytov_Akbilek.pdf", 
               description: "–ê“õ–±—ñ–ª–µ–∫ ‚Äî “õ–∞–∑–∞“õ –∂–∞–∑—É—à—ã—Å—ã –ñ“Ø—Å—ñ–ø–±–µ–∫ –ê–π–º–∞—É—ã—Ç–æ–≤—Ç—ã“£ 1927 –∂—ã–ª—ã –∂–∞–∑—ã–ª“ì–∞–Ω —Ä–æ–º–∞–Ω—ã. –ë“±–ª —à—ã“ì–∞—Ä–º–∞ “õ–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω–¥–µ ”ô–π–µ–ª–¥–µ—Ä —Ç–∞“ì–¥—ã—Ä—ã, –æ—Ç–±–∞—Å—ã–ª—ã“õ ”©–º—ñ—Ä –º–µ–Ω ”ô–ª–µ—É–º–µ—Ç—Ç—ñ–∫ –º”ô—Å–µ–ª–µ–ª–µ—Ä–¥—ñ —Ç–µ—Ä–µ“£ “õ–æ–∑“ì–∞–π—Ç—ã–Ω —à—ã“ì–∞—Ä–º–∞–ª–∞—Ä–¥—ã“£ –±—ñ—Ä—ñ –±–æ–ª—ã–ø —Ç–∞–±—ã–ª–∞–¥—ã.",
               image: "https://sun9-69.userapi.com/impg/S9w-ZYE_vb3QtLUgsyVNdKOw1no-z7Jz4gWEsQ/cfDpfQnySe4.jpg?size=800x1188&quality=95&sign=2d179e5584f43f6c08985a9a8d9ce6dc&c_uniq_tag=SsAVXpFxo4WJL8u3j2P2GwfY_dNu-lTViTDy4OrUl1E&type=album",
               isPaid: false,
               price: 0
            },
            {
               id: 7,
               title: "“ö–∞“ª–∞—Ä", 
               author: "–Ü–ª–∏—è—Å –ï—Å–µ–Ω–±–µ—Ä–ª–∏–Ω", 
               genre: "–¢–∞—Ä–∏—Ö–∏", 
               link: "https://pushkinlibrary.kz/exhibitions/esenberlin/docs/3.pdf", 
               description: "“ö–∞“ª–∞—Ä ‚Äî “õ–∞–∑–∞“õ –∂–∞–∑—É—à—ã—Å—ã –Ü–ª–∏—è—Å –ñ–∞–Ω—Å“Ø–≥—ñ—Ä–æ–≤—Ç—ã“£ 1936 –∂—ã–ª—ã –∂–∞–∑—ã–ª“ì–∞–Ω —Ä–æ–º–∞–Ω—ã. –ë“±–ª —à—ã“ì–∞—Ä–º–∞ “õ–∞–∑–∞“õ ”ô–¥–µ–±–∏–µ—Ç—ñ–Ω–¥–µ ”ô–ª–µ—É–º–µ—Ç—Ç—ñ–∫ –∂”ô–Ω–µ —Å–∞—è—Å–∏ —Ç–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä–¥—ã —Ç–µ—Ä–µ“£ “õ–æ–∑“ì–∞–π—Ç—ã–Ω –º–∞“£—ã–∑–¥—ã —à—ã“ì–∞—Ä–º–∞–ª–∞—Ä–¥—ã“£ –±—ñ—Ä—ñ –±–æ–ª—ã–ø —Ç–∞–±—ã–ª–∞–¥—ã. –†–æ–º–∞–Ω–Ω—ã“£ –Ω–µ–≥—ñ–∑—ñ–Ω–¥–µ “õ–∞–∑–∞“õ —Ö–∞–ª“õ—ã–Ω—ã“£ “±–ª—Ç—Ç—ã“õ —Ç–∞“ì–¥—ã—Ä—ã, —Å–æ—Ü–∏–∞–ª–∏—Å—Ç—ñ–∫ “õ–æ“ì–∞–º–Ω—ã“£ “õ–∞–ª—ã–ø—Ç–∞—Å—É –∫–µ–∑–µ“£—ñ, –µ“£–±–µ–∫ –∞–¥–∞–º–¥–∞—Ä—ã–Ω—ã“£ “õ–∏—ã–Ω—à—ã–ª—ã“ì—ã –∂”ô–Ω–µ “±–ª—Ç—Ç—ã“õ —Å–µ–∑—ñ–º–¥–µ—Ä –∂–∞–π–ª—ã –º”ô—Å–µ–ª–µ–ª–µ—Ä –∂–∞—Ç—ã—Ä.",
               image: "https://sun9-62.userapi.com/impf/c638927/v638927783/557a/9_ws_YkAJxw.jpg?size=582x807&quality=96&sign=593f5a08bab1259444179136179d9809&c_uniq_tag=PYg1a_Hvtz8sGncyjPDwi0mZkMdNtimQKC22iqtMQNg&type=album",
               isPaid: true,
               price: 1800
            },
            {
               id: 8,
               title: "–ñ—É—Å–∞–Ω –∏—ñ—Å—ñ", 
               author: "–°–∞–π—ã–Ω –ú“±—Ä–∞—Ç–±–µ–∫–æ–≤", 
               genre: "–¢–∞—Ä–∏—Ö–∏", 
               link: "https://pushkinlibrary.kz/exhibitions/Muratbekov_kaz/images/Muratbekov_Zhusan_iisi.pdf", 
               description: "–ñ—É—Å–∞–Ω –∏—Å—ñ ‚Äî “õ–∞–∑–∞“õ –∂–∞–∑—É—à—ã—Å—ã –°“±–ª—Ç–∞–Ω”ô–ª—ñ –ë–∞–ª“ì–∞–±–∞–µ–≤—Ç—ã“£ 2006 –∂—ã–ª—ã –∂–∞–∑—ã–ª“ì–∞–Ω —Ä–æ–º–∞–Ω—ã. –ë“±–ª —à—ã“ì–∞—Ä–º–∞ “õ–∞–∑–∞“õ “õ–æ“ì–∞–º—ã–Ω—ã“£ ”©—Ç–∫–µ–Ω –º–µ–Ω “õ–∞–∑—ñ—Ä–≥—ñ –∫–µ–∑–µ“£—ñ–Ω–¥–µ–≥—ñ –∫“Ø—Ä–¥–µ–ª—ñ –º”ô—Å–µ–ª–µ–ª–µ—Ä–¥—ñ “õ–∞—Ä–∞—Å—Ç—ã—Ä—ã–ø, —Å–æ–Ω—ã–º–µ–Ω “õ–∞—Ç–∞—Ä –∞–¥–∞–º –∂–∞–Ω—ã–Ω–¥–∞“ì—ã —Ç–µ—Ä–µ“£ —Å–µ–∑—ñ–º–¥–µ—Ä –º–µ–Ω —Ä—É—Ö–∞–Ω–∏ —ñ–∑–¥–µ–Ω—ñ—Å—Ç–µ—Ä–≥–µ –∞—Ä–Ω–∞–ª–∞–¥—ã. –†–æ–º–∞–Ω–Ω—ã“£ –Ω–µ–≥—ñ–∑–≥—ñ —Ç–∞“õ—ã—Ä—ã–±—ã ‚Äî –∞–¥–∞–º–Ω—ã“£ ”©–∑ –±–æ–ª–º—ã—Å—ã–Ω —Ç“Ø—Å—ñ–Ω—ñ–ø, —ñ—à–∫—ñ –∂–∞–Ω –¥“Ø–Ω–∏–µ—Å—ñ–Ω–¥–µ —Ç—ã–Ω—ã—à—Ç—ã“õ —Ç–∞–±—É“ì–∞ “±–º—Ç—ã–ª—É—ã.",
               image: "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1548241221i/43687798.jpg",
               isPaid: false,
               price: 0
            }
        ];

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–Ω–∏–≥ —Å —É—á–µ—Ç–æ–º —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–Ω–æ—Å—Ç–∏
        const popularBooks = [
            { 
                title: "–ú–∞—Ö–∞–±–±–∞—Ç, “õ—ã–∑—ã“õ –º–æ–ª –∂—ã–ª–¥–∞—Ä", 
                author: "”ò–∑—ñ–ª—Ö–∞–Ω –ù“±—Ä—à–∞–π—ã“õ–æ–≤", 
                genre: "–†–æ–º–∞–Ω—Ç–∏–∫–∞", 
                description: "–ë“±–ª –∫—ñ—Ç–∞–ø –∂–∞—Å—Ç–∞—Ä–¥—ã“£ –º–∞—Ö–∞–±–±–∞—Ç—ã –º–µ–Ω ”©–º—ñ—Ä–ª—ñ–∫ “õ–∏—ã–Ω–¥—ã“õ—Ç–∞—Ä—ã–Ω —Å—É—Ä–µ—Ç—Ç–µ–π–¥—ñ.",
                link: "http://dev-s.balatili.kz/uploads/books/e3c0b8aca955a2e22aa53f053550270c/%D0%9C%D0%B0%D1%85%D0%B0%D0%B1%D0%B1%D0%B0%D1%82%20%D2%9B%D1%8B%D0%B7%D1%8B%D2%9B%20%D0%BC%D0%BE%D0%BB%20%D0%B6%D1%8B%D0%BB%D0%B4%D0%B0%D1%80.pdf", 
                image: "https://simg.marwin.kz/media/catalog/product/cache/41deb699a7fea062a8915debbbb0442c/m/a/nrshayyov_mahabbat_yzy_mol_jyldar.jpg",
                isPaid: true,
                price: 1200
            },
            { 
                title: "–ê–±–∞–π –∂–æ–ª—ã", 
                author: "–ú“±—Ö—Ç–∞—Ä ”ò—É–µ–∑–æ–≤", 
                genre: "–ö–ª–∞—Å—Å–∏–∫–∞", 
                description: "“ö–∞–∑–∞“õ—Ç—ã“£ “±–ª—ã –∞“õ—ã–Ω—ã –ê–±–∞–π “ö“±–Ω–∞–Ω–±–∞–π“±–ª—ã —Ç—É—Ä–∞–ª—ã —Ç–∞—Ä–∏—Ö–∏ —Ä–æ–º–∞–Ω.",
                link: "https://example.com/abai-zholy.pdf",
                image: "https://kitap.kz/storage/books/AbaiZholy.jpg",
                isPaid: false,
                price: 0
            }
        ];

        document.addEventListener("DOMContentLoaded", function () {
            displayPopularBooks();
            displayGenres();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ sessionId –¥–ª—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∫–æ–º–Ω–∞—Ç–µ —Å–µ—Å—Å–∏–∏ –æ–ø–ª–∞—Ç—ã
            if (sessionId) {
                socket.emit('join-payment-session', sessionId);
            }
            
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã
            socket.on('payment-status-changed', function(data) {
                console.log('–ü–æ–ª—É—á–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞:', data);
                
                // –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å "completed", –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫–Ω–∏–≥
                if (data.status === 'completed' && currentUser) {
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–∏–≥—É –≤ —Å–ø–∏—Å–æ–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö
                    if (!purchasedBooks[currentUser]) {
                        purchasedBooks[currentUser] = [];
                    }
                    
                    const purchasedBook = books.find(book => book.id === data.bookId);
                    const bookTitle = purchasedBook?.title;
                    
                    if (bookTitle && !purchasedBooks[currentUser].includes(bookTitle)) {
                        purchasedBooks[currentUser].push(bookTitle);
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
                        if (purchasedBook) {
                            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –¥—Ä—É–≥–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
                            const openModals = document.querySelectorAll('.modal.show');
                            openModals.forEach(modal => {
                                const instance = bootstrap.Modal.getInstance(modal);
                                if (instance) instance.hide();
                            });
                            
                            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
                            createConfetti();
                            
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
                            const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                            successModal.show();
                            
                            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                            document.getElementById('success-close').onclick = function() {
                                successModal.hide();
                            };
                            
                            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ß–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É"
                            document.getElementById('success-read-book').onclick = function() {
                                successModal.hide();
                                window.open(purchasedBook.link, '_blank');
                            };
                        } else {
                            // –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                            showNotification(`–ù–æ–≤–∞—è –∫–Ω–∏–≥–∞ —É—Å–ø–µ—à–Ω–æ –∫—É–ø–ª–µ–Ω–∞!`, 'success', 5000);
                        }
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–∏–≥
                        const currentGenre = document.querySelector('.genres .genre-button.active')?.textContent;
                        if (currentGenre && currentGenre !== "–ë–∞—Ä–ª—ã“õ –∫—ñ—Ç–∞–ø—Ç–∞—Ä") {
                            filterByGenre(currentGenre);
                        } else {
                            displayBooks(books);
                        }
                    }
                }
            });
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–Ω–∏–≥ —Å —Å–µ—Ä–≤–µ—Ä–∞
        function fetchBooks() {
            fetch('/api/books')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ –∫–Ω–∏–≥
                        books.length = 0;
                        books.push(...data.books);
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                        displayBooks(books);
                        displayGenres();
                    }
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥:', error);
                });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function registerUser() {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            showLoading();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
            fetch('/api/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name, email, password }),
            })
            .then(response => response.json())
            .then(data => {
                showLoading(false);
                
                if (data.success) {
                    showNotification('–¢—ñ—Ä–∫–µ–ª—É —Å”ô—Ç—Ç—ñ –∞—è“õ—Ç–∞–ª–¥—ã!');
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É –≤—Ö–æ–¥–∞
                    document.getElementById('login-tab').click();
                } else {
                    alert(data.message || '–¢—ñ—Ä–∫–µ–ª—É –∫–µ–∑—ñ–Ω–¥–µ “õ–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã.');
                }
            })
            .catch(error => {
                showLoading(false);
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
                alert('–°–µ—Ä–≤–µ—Ä–≥–µ “õ–æ—Å—ã–ª—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –±–∞–π–ª–∞–Ω—ã—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑.');
            });
            
            return false;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function validateLogin() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            showLoading();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—Ö–æ–¥
            fetch('/api/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, password }),
            })
            .then(response => response.json())
            .then(data => {
                showLoading(false);
                
                if (data.success) {
                    currentUser = data.user.email;
                    currentUserId = data.user.id;
                    document.getElementById('login-section').style.display = 'none';
                    document.getElementById('main-section').style.display = 'block';
                    
                    fetchUserBooks(currentUserId);
                    
                    showNotification(`“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑, ${data.user.name}!`);
                } else {
                    alert(data.message || '“ö–∞—Ç–µ –ª–æ–≥–∏–Ω –Ω–µ–º–µ—Å–µ “õ“±–ø–∏—è —Å”©–∑!');
                }
            })
            .catch(error => {
                showLoading(false);
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ:', error);
                alert('–°–µ—Ä–≤–µ—Ä–≥–µ “õ–æ—Å—ã–ª—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –±–∞–π–ª–∞–Ω—ã—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑.');
            });
            
            return false;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫–Ω–∏–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function fetchUserBooks(userId) {
            if (!userId) return;
            
            fetch(`/api/user-books/${userId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        if (!purchasedBooks[currentUser]) {
                            purchasedBooks[currentUser] = [];
                        }
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–∏–≥–∏ –≤ —Å–ø–∏—Å–æ–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö
                        data.books.forEach(book => {
                            if (!purchasedBooks[currentUser].includes(book.title)) {
                                purchasedBooks[currentUser].push(book.title);
                            }
                        });
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–∏–≥
                        const currentGenre = document.querySelector('.genres .genre-button.active')?.textContent;
                        if (currentGenre && currentGenre !== "–ë–∞—Ä–ª—ã“õ –∫—ñ—Ç–∞–ø—Ç–∞—Ä") {
                            filterByGenre(currentGenre);
                        } else {
                            displayBooks(books);
                        }
                    }
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫–Ω–∏–≥:', error);
                });
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∫–Ω–∏–≥
        function searchBooks() {
            const query = document.getElementById('search-bar').value.toLowerCase();
            const results = books.filter(book => book.title.toLowerCase().includes(query) || book.author.toLowerCase().includes(query));
            displayBooks(results);
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∂–∞–Ω—Ä—É
        function filterByGenre(genre) {
            const filteredBooks = books.filter(book => book.genre === genre);
            displayBooks(filteredBooks);
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥
        function displayBooks(filteredBooks) {
            const bookList = document.getElementById('book-list');
            bookList.innerHTML = '';

            if (filteredBooks.length > 0) {
                filteredBooks.forEach(book => {
                    const bookItem = document.createElement('div');
                    bookItem.classList.add('book-item');
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –±–µ–π–¥–∂ –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –∫–Ω–∏–≥
                    let paidBadge = '';
                    if (book.isPaid) {
                        paidBadge = `<span class="paid-badge">${book.price} ‚Ç∏</span>`;
                    }
                    
                    bookItem.innerHTML = `
                        ${paidBadge}
                        <img src="${book.image}" alt="${book.title}" class="img-fluid">
                        <h5>${book.title}</h5>
                        <p>${book.author}</p>
                        <button class="btn btn-secondary" onclick="showBookDetails(${book.id || `'${book.title}'`})">–¢–æ–ª—ã“ì—ã—Ä–∞“õ</button>`;
                    bookList.appendChild(bookItem);
                });
            } else {
                bookList.innerHTML = '<p>–ï—à—Ç–µ“£–µ —Ç–∞–±—ã–ª–º–∞–¥—ã</p>';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∫–Ω–∏–≥–∏
        function showBookDetails(bookIdOrTitle) {
            // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–∏–≥—É –ø–æ ID –∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫—É
            let book;
            if (typeof bookIdOrTitle === 'number') {
                book = books.find(b => b.id === bookIdOrTitle);
            } else {
                book = books.find(b => b.title === bookIdOrTitle);
            }
            
            if (!book) {
                showNotification('–ö–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
                return;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏
            showLoading();
            
            setTimeout(() => {
                document.getElementById('modal-book-title').textContent = book.title;
                document.getElementById('modal-book-author').textContent = `–ê–≤—Ç–æ—Ä: ${book.author}`;
                document.getElementById('modal-book-description').textContent = book.description;
                
                const priceInfoElement = document.getElementById('modal-book-price-info');
                const actionContainer = document.getElementById('modal-book-action-container');
                
                // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                priceInfoElement.innerHTML = '';
                actionContainer.innerHTML = '';
                
                if (book.isPaid) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫—É–ø–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç—Ç—É –∫–Ω–∏–≥—É
                    const hasPurchased = currentUser && purchasedBooks[currentUser] && 
                                        purchasedBooks[currentUser].includes(book.title);
                    
                    if (hasPurchased) {
                        priceInfoElement.innerHTML = '<p class="text-success"><i class="fas fa-check-circle me-2"></i>–°–∞—Ç—ã–ø –∞–ª—ã–Ω“ì–∞–Ω</p>';
                        actionContainer.innerHTML = `<a href="${book.link}" target="_blank" class="btn btn-primary"><i class="fas fa-book-open me-2"></i>–ö—ñ—Ç–∞–ø—Ç—ã –æ“õ—É</a>`;
                    } else {
                        priceInfoElement.innerHTML = `<p>–ë–∞“ì–∞—Å—ã: <strong>${book.price} ‚Ç∏</strong></p>`;
                        actionContainer.innerHTML = `
                            <button class="btn btn-success" onclick="createPaymentSession(${book.id})"><i class="fas fa-shopping-cart me-2"></i>–°–∞—Ç—ã–ø –∞–ª—É</button>
                        `;
                    }
                } else {
                    priceInfoElement.innerHTML = '<p class="text-info"><i class="fas fa-gift me-2"></i>–¢–µ–≥—ñ–Ω –∫—ñ—Ç–∞–ø</p>';
                    actionContainer.innerHTML = `<a href="${book.link}" target="_blank" class="btn btn-primary"><i class="fas fa-book-open me-2"></i>–ö—ñ—Ç–∞–ø—Ç—ã –æ“õ—É</a>`;
                }
                
                showLoading(false);
                const bookModal = new bootstrap.Modal(document.getElementById('bookModal'));
                bookModal.show();
            }, 500);
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–µ—Å—Å–∏–∏
        function createPaymentSession(bookId) {
            if (!currentUser || !currentUserId) {
                alert('–ö—ñ—Ç–∞–ø—Ç—ã —Å–∞—Ç—ã–ø –∞–ª—É “Ø—à—ñ–Ω –∂“Ø–π–µ–≥–µ –∫—ñ—Ä—É “õ–∞–∂–µ—Ç');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏
            showLoading();
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–µ—Å—Å–∏—é
            fetch('/api/payment-session', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ 
                    userId: currentUserId,
                    bookId: bookId
                }),
            })
            .then(response => response.json())
            .then(data => {
                showLoading(false);
                
                if (data.success) {
                    // –ï—Å–ª–∏ –∫–Ω–∏–≥–∞ —É–∂–µ –∫—É–ø–ª–µ–Ω–∞
                    if (data.alreadyPurchased) {
                        showNotification('–ë“±–ª –∫—ñ—Ç–∞–ø –±“±—Ä—ã–Ω —Å–∞—Ç—ã–ø –∞–ª—ã–Ω“ì–∞–Ω');
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫–Ω–∏–≥
                        fetchUserBooks(currentUserId);
                        
                        // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∫–Ω–∏–≥–∏
                        const bookModal = bootstrap.Modal.getInstance(document.getElementById('bookModal'));
                        bookModal.hide();
                        
                        return;
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã
                    showPaymentModal(bookId, data.sessionId, data.userId);
                } else {
                    alert(data.message || '–¢”©–ª–µ–º —Å–µ—Å—Å–∏—è—Å—ã–Ω –∂–∞—Å–∞—É –∫–µ–∑—ñ–Ω–¥–µ “õ–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã');
                }
            })
            .catch(error => {
                showLoading(false);
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–µ—Å—Å–∏–∏:', error);
                alert('–°–µ—Ä–≤–µ—Ä–≥–µ “õ–æ—Å—ã–ª—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –±–∞–π–ª–∞–Ω—ã—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑.');
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø–ª–∞—Ç—ã
        function showPaymentModal(bookId, sessionId, userId) {
            const book = books.find(b => b.id === bookId);
            
            if (!book) {
                showNotification('–ö–Ω–∏–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
                return;
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∫–Ω–∏–≥–∏
            const bookModal = bootstrap.Modal.getInstance(document.getElementById('bookModal'));
            bookModal.hide();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏
            showLoading();
            
            setTimeout(() => {
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –∫–Ω–∏–≥–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –æ–ø–ª–∞—Ç—ã
                document.getElementById('payment-book-title').textContent = book.title;
                document.getElementById('payment-book-price').textContent = `–ë–∞“ì–∞—Å—ã: ${book.price} ‚Ç∏`;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–∑–æ–≤—ã–π URL –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è
                const baseUrl = window.location.origin;
                
                // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ —Å–µ—Å—Å–∏–∏ –æ–ø–ª–∞—Ç—ã
                socket.emit('join-payment-session', sessionId);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –æ–ø–ª–∞—Ç—ã
                window.currentPaymentSession = {
                    sessionId: sessionId,
                    bookId: bookId,
                    bookTitle: book.title,
                    status: 'pending'
                };
                
                // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –æ–ø–ª–∞—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–Ω–∏–≥–∏ –∏ —Å–µ—Å—Å–∏–µ–π
                const paymentUrl = `${baseUrl}/payment.html?book=${encodeURIComponent(book.title)}&price=${book.price}&user=${encodeURIComponent(currentUser)}&session=${sessionId}&bookId=${bookId}&userId=${userId}`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º QR-–∫–æ–¥ —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
                document.querySelector('.payment-qr').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(paymentUrl)}`;
                
                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∏–º–∏—Ç–∞—Ü–∏–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞
                document.getElementById('simulate-scan').onclick = function() {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
                    document.querySelector('.qr-overlay').classList.remove('d-none');
                    
                    // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
                    setTimeout(() => {
                        // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ/–≤–∫–ª–∞–¥–∫–µ
                        window.open(paymentUrl, '_blank');
                        document.querySelector('.qr-overlay').classList.add('d-none');
                    }, 1500);
                };
                
                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
                document.getElementById('confirm-payment').onclick = function() {
                    completePayment(sessionId);
                };
                
                showLoading(false);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã
                const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
                paymentModal.show();
            }, 500);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
        function completePayment(sessionId) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏
            showLoading(true, '–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞...');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–µ—Å—Å–∏–∏
            fetch('/api/payment-status', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ 
                    sessionId: sessionId,
                    status: 'completed'
                }),
            })
            .then(response => response.json())
            .then(data => {
                showLoading(false);
                
                if (data.success) {
                    // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ
                    const currentBook = books.find(book => book.id === window.currentPaymentSession.bookId);
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã
                    const paymentModal = bootstrap.Modal.getInstance(document.getElementById('paymentModal'));
                    paymentModal.hide();
                    
                    // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
                    createConfetti();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
                    const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                    successModal.show();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    showNotification(`–ö—ñ—Ç–∞–ø —Å”ô—Ç—Ç—ñ —Å–∞—Ç—ã–ø –∞–ª—ã–Ω–¥—ã!`, 'success', 5000);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫–Ω–∏–≥
                    fetchUserBooks(currentUserId);
                    
                    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
                    document.getElementById('success-close').onclick = function() {
                        successModal.hide();
                    };
                    
                    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ß–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É"
                    document.getElementById('success-read-book').onclick = function() {
                        successModal.hide();
                        if (currentBook) {
                            window.open(currentBook.link, '_blank');
                        }
                    };
                } else {
                    alert(data.message || '–¢”©–ª–µ–º–¥—ñ –∞—è“õ—Ç–∞—É –∫–µ–∑—ñ–Ω–¥–µ “õ–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã');
                }
            })
            .catch(error => {
                showLoading(false);
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø–ª–∞—Ç—ã:', error);
                alert('–°–µ—Ä–≤–µ—Ä–≥–µ “õ–æ—Å—ã–ª—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –±–∞–π–ª–∞–Ω—ã—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑.');
            });
        }
        
        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        function showLoading(show = true, message = '–ó–∞–≥—Ä—É–∑–∫–∞...') {
            const loadingOverlay = document.getElementById('loadingOverlay');
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –µ—Å–ª–∏ –∏—Ö –µ—â–µ –Ω–µ—Ç
            if (!document.querySelector('.loading-text')) {
                const loadingText = document.createElement('div');
                loadingText.className = 'loading-text';
                loadingText.textContent = message;
                
                const progressContainer = document.createElement('div');
                progressContainer.className = 'loading-progress';
                
                const progressBar = document.createElement('div');
                progressBar.className = 'loading-progress-bar';
                
                progressContainer.appendChild(progressBar);
                loadingOverlay.appendChild(loadingText);
                loadingOverlay.appendChild(progressContainer);
            } else {
                document.querySelector('.loading-text').textContent = message;
            }
            
            if (show) {
                loadingOverlay.classList.add('show');
                
                // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
                const progressBar = document.querySelector('.loading-progress-bar');
                progressBar.style.width = '0%';
                
                setTimeout(() => {
                    progressBar.style.width = '60%';
                }, 300);
                
                setTimeout(() => {
                    progressBar.style.width = '80%';
                }, 600);
            } else {
                // –ó–∞–≤–µ—Ä—à–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
                const progressBar = document.querySelector('.loading-progress-bar');
                progressBar.style.width = '100%';
                
                // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–∫—Ä—ã—Ç–∏–µ–º –æ–≤–µ—Ä–ª–µ—è
                setTimeout(() => {
                    loadingOverlay.classList.remove('show');
                    setTimeout(() => {
                        progressBar.style.width = '0%';
                    }, 300);
                }, 500);
            }
        }

        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, type = 'success', duration = 3000) {
            const toast = document.getElementById('notificationToast');
            const content = toast.querySelector('.notification-content');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            let icon = '';
            if (type === 'error') {
                toast.style.backgroundColor = 'var(--danger-color)';
                icon = '<i class="fas fa-exclamation-circle"></i>';
            } else if (type === 'warning') {
                toast.style.backgroundColor = 'var(--warning-color)';
                toast.style.color = '#333';
                icon = '<i class="fas fa-exclamation-triangle"></i>';
            } else {
                toast.style.backgroundColor = 'var(--success-color)';
                icon = '<i class="fas fa-check-circle"></i>';
            }
            
            content.innerHTML = `${icon} ${message}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        function showLoading(show = true) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            if (show) {
                loadingOverlay.classList.add('show');
            } else {
                loadingOverlay.classList.remove('show');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, type = 'success', duration = 3000) {
            const toast = document.getElementById('notificationToast');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            if (type === 'error') {
                toast.style.backgroundColor = '#dc3545';
            } else if (type === 'warning') {
                toast.style.backgroundColor = '#ffc107';
                toast.style.color = '#333';
            } else {
                toast.style.backgroundColor = '#4bb71b';
            }
            
            toast.querySelector('.notification-content').textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }
        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
        function createConfetti() {
            const container = document.getElementById('confetti-container');
            container.innerHTML = ''; // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            
            const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', 
                            '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50', 
                            '#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800', '#FF5722'];
            
            // –°–æ–∑–¥–∞–µ–º 100 –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è, —Ä–∞–∑–º–µ—Ä –∏ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.opacity = (Math.random() * 0.5) + 0.5;
                confetti.style.animationDuration = (Math.random() * 3) + 2 + 's';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                
                // –°–ª—É—á–∞–π–Ω–∞—è —Ñ–æ—Ä–º–∞ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
                if (Math.random() > 0.5) {
                    confetti.style.borderRadius = '50%';
                } else if (Math.random() > 0.5) {
                    confetti.style.borderRadius = '0';
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                } else {
                    confetti.style.width = '8px';
                    confetti.style.height = '8px';
                    confetti.style.clipPath = 'polygon(50% 0%, 0% 100%, 100% 100%)';
                }
                
                container.appendChild(confetti);
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –∂–∞–Ω—Ä–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏
        function highlightActiveGenre(genreElement) {
            // –£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å active —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∂–∞–Ω—Ä–æ–≤
            document.querySelectorAll('.genres .genre-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å active –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
            genreElement.classList.add('active');
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–∫—Ç–∏–≤–Ω—ã–º –∂–∞–Ω—Ä–æ–º
        function displayGenres() {
            const genres = [...new Set(books.map(book => book.genre))];
            const genresContainer = document.getElementById('genres');
            genresContainer.innerHTML = '';

            // –ö–Ω–æ–ø–∫–∞ "–ë–∞—Ä–ª—ã“õ –∫—ñ—Ç–∞–ø—Ç–∞—Ä" (–í—Å–µ –∫–Ω–∏–≥–∏)
            const allBooksButton = document.createElement('button');
            allBooksButton.textContent = "–ë–∞—Ä–ª—ã“õ –∫—ñ—Ç–∞–ø—Ç–∞—Ä";
            allBooksButton.classList.add('genre-button', 'active'); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–∫—Ç–∏–≤–Ω–∞
            allBooksButton.onclick = function() {
                displayBooks(books);
                highlightActiveGenre(this);
            }
            genresContainer.appendChild(allBooksButton);

            // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∂–∞–Ω—Ä–æ–≤
            genres.forEach(genre => {
                const button = document.createElement('button');
                button.textContent = genre;
                button.classList.add('genre-button');
                button.onclick = function() {
                    filterByGenre(genre);
                    highlightActiveGenre(this);
                }
                genresContainer.appendChild(button);
            });

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –∫–Ω–∏–≥–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            displayBooks(books);
        }

        function showAllBooks() {
            displayBooks(books); // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏
            window.scrollTo({ top: document.getElementById('book-list').offsetTop, behavior: 'smooth' }); // –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –∫ –∫–Ω–∏–≥–∞–º
        }

        function displayPopularBooks() {
            const popularBooksContainer = document.getElementById('popular-books-container');
            popularBooksContainer.innerHTML = '';

            popularBooks.forEach(book => {
                const bookItem = document.createElement('div');
                bookItem.classList.add('book-item'); // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏
                
                // –î–æ–±–∞–≤–ª—è–µ–º –±–µ–π–¥–∂ –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –∫–Ω–∏–≥
                let paidBadge = '';
                if (book.isPaid) {
                    paidBadge = `<span class="paid-badge">${book.price} ‚Ç∏</span>`;
                }
                
                bookItem.innerHTML = `
                    ${paidBadge}
                    <img src="${book.image}" class="img-fluid" alt="${book.title}">
                    <h3>${book.title}</h3>
                    <p>${book.author}</p>
                    <button class="btn btn-secondary" onclick="showBookDetails('${book.title}')">–¢–æ–ª—ã“ì—ã—Ä–∞“õ</button>
                `;
                popularBooksContainer.appendChild(bookItem);
            });
        }
    </script>

    <!-- –ó–∞–º–µ–Ω–∏–ª–∏ –Ω–∞ CDN FontAwesome —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CORS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
